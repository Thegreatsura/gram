// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: queries.sql

package repo

import (
	"context"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

const createDeployment = `-- name: CreateDeployment :one
INSERT INTO deployments (
    user_id
  , manifest_version
  , manifest_url
  , organization_id
  , project_id
  , github_repo
  , github_pr
  , external_id
  , external_url
) VALUES (
    $1
  , $2
  , $3
  , $4
  , $5
  , $6
  , $7
  , $8
  , $9
)
RETURNING 
    id
  , user_id
  , organization_id
  , project_id
  , manifest_version
  , manifest_url
  , github_repo
  , github_pr
  , external_id
  , external_url
  , created_at
  , updated_at
`

type CreateDeploymentParams struct {
	UserID          pgtype.Text
	ManifestVersion string
	ManifestUrl     string
	OrganizationID  string
	ProjectID       uuid.UUID
	GithubRepo      pgtype.Text
	GithubPr        pgtype.Text
	ExternalID      pgtype.Text
	ExternalUrl     pgtype.Text
}

type CreateDeploymentRow struct {
	ID              uuid.UUID
	UserID          pgtype.Text
	OrganizationID  string
	ProjectID       uuid.UUID
	ManifestVersion string
	ManifestUrl     string
	GithubRepo      pgtype.Text
	GithubPr        pgtype.Text
	ExternalID      pgtype.Text
	ExternalUrl     pgtype.Text
	CreatedAt       pgtype.Timestamptz
	UpdatedAt       pgtype.Timestamptz
}

func (q *Queries) CreateDeployment(ctx context.Context, arg CreateDeploymentParams) (CreateDeploymentRow, error) {
	row := q.db.QueryRow(ctx, createDeployment,
		arg.UserID,
		arg.ManifestVersion,
		arg.ManifestUrl,
		arg.OrganizationID,
		arg.ProjectID,
		arg.GithubRepo,
		arg.GithubPr,
		arg.ExternalID,
		arg.ExternalUrl,
	)
	var i CreateDeploymentRow
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.OrganizationID,
		&i.ProjectID,
		&i.ManifestVersion,
		&i.ManifestUrl,
		&i.GithubRepo,
		&i.GithubPr,
		&i.ExternalID,
		&i.ExternalUrl,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getDeployment = `-- name: GetDeployment :one
SELECT 
    id
  , user_id
  , organization_id
  , project_id
  , manifest_version
  , manifest_url
  , github_repo
  , github_pr
  , external_id
  , external_url
  , created_at
  , updated_at
FROM deployments
WHERE id = $1
`

type GetDeploymentRow struct {
	ID              uuid.UUID
	UserID          pgtype.Text
	OrganizationID  string
	ProjectID       uuid.UUID
	ManifestVersion string
	ManifestUrl     string
	GithubRepo      pgtype.Text
	GithubPr        pgtype.Text
	ExternalID      pgtype.Text
	ExternalUrl     pgtype.Text
	CreatedAt       pgtype.Timestamptz
	UpdatedAt       pgtype.Timestamptz
}

func (q *Queries) GetDeployment(ctx context.Context, id uuid.UUID) (GetDeploymentRow, error) {
	row := q.db.QueryRow(ctx, getDeployment, id)
	var i GetDeploymentRow
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.OrganizationID,
		&i.ProjectID,
		&i.ManifestVersion,
		&i.ManifestUrl,
		&i.GithubRepo,
		&i.GithubPr,
		&i.ExternalID,
		&i.ExternalUrl,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
