// Code generated by goa v3.20.0, DO NOT EDIT.
//
// gram HTTP client types
//
// Command:
// $ goa gen github.com/speakeasy-api/gram/design

package client

import (
	"unicode/utf8"

	gram "github.com/speakeasy-api/gram/gen/gram"
	goa "goa.design/goa/v3/pkg"
)

// CreateDeploymentRequestBody is the type of the "gram" service
// "createDeployment" endpoint HTTP request body.
type CreateDeploymentRequestBody struct {
	// The external ID to refer to the deployment. This can be a git commit hash
	// for example.
	ExternalID *string `form:"external_id,omitempty" json:"external_id,omitempty" xml:"external_id,omitempty"`
	// The upstream URL a deployment can refer to. This can be a github url to a
	// commit hash or pull request.
	ExternalURL *string `form:"external_url,omitempty" json:"external_url,omitempty" xml:"external_url,omitempty"`
	// The HTTP tools available in the deployment.
	Openapi3p1Tools []*OpenAPI3P1ToolFormRequestBody `form:"openapi_3p1_tools,omitempty" json:"openapi_3p1_tools,omitempty" xml:"openapi_3p1_tools,omitempty"`
}

// CreateDeploymentResponseBody is the type of the "gram" service
// "createDeployment" endpoint HTTP response body.
type CreateDeploymentResponseBody struct {
	// The ID to of the deployment.
	ID *string `form:"id,omitempty" json:"id,omitempty" xml:"id,omitempty"`
}

// OpenAPI3P1ToolFormRequestBody is used to define fields on request body types.
type OpenAPI3P1ToolFormRequestBody struct {
	Kind string `form:"kind" json:"kind" xml:"kind"`
	// The name of the tool.
	Name string `form:"name" json:"name" xml:"name"`
	// The description that is provided with the tool.
	Description string `form:"description" json:"description" xml:"description"`
	// The tags that are associated with the tool.
	Tags []string `form:"tags" json:"tags" xml:"tags"`
	// The path of the HTTP endpoint.
	Path string `form:"path" json:"path" xml:"path"`
	// The method to use for the HTTP request.
	Method string `form:"method" json:"method" xml:"method"`
	// A map of path parameters to interpolate into the path of the HTTP request.
	PathParameters map[string]*OpenAPI3P1ParameterSchemaRequestBody `form:"path_parameters" json:"path_parameters" xml:"path_parameters"`
	// A map of header schemas to send with the HTTP request.
	HeaderParameters map[string]*OpenAPI3P1ParameterSchemaRequestBody `form:"header_parameters" json:"header_parameters" xml:"header_parameters"`
	// A map of query parameters to send with the HTTP request.
	QueryParameters map[string]*OpenAPI3P1ParameterSchemaRequestBody `form:"query_parameters" json:"query_parameters" xml:"query_parameters"`
	// The JSON Schema describing the body of the HTTP request.
	Body string `form:"body" json:"body" xml:"body"`
}

// OpenAPI3P1ParameterSchemaRequestBody is used to define fields on request
// body types.
type OpenAPI3P1ParameterSchemaRequestBody struct {
	// The name of the parameter.
	Name string `form:"name" json:"name" xml:"name"`
	// A brief description of the parameter.
	Description *string `form:"description,omitempty" json:"description,omitempty" xml:"description,omitempty"`
	// The location of the parameter in an HTTP request.
	In string `form:"in" json:"in" xml:"in"`
	// Whether the parameter is required.
	Required bool `form:"required" json:"required" xml:"required"`
	// The style of the parameter.
	Style *string `form:"style,omitempty" json:"style,omitempty" xml:"style,omitempty"`
	// Whether the parameter is exploded.
	Explode *bool `form:"explode,omitempty" json:"explode,omitempty" xml:"explode,omitempty"`
	// Whether the parameter is allowed to be reserved.
	AllowReserved *bool `form:"allowReserved,omitempty" json:"allowReserved,omitempty" xml:"allowReserved,omitempty"`
	// The JSON Schema describing the parameter.
	Schema *string `form:"schema,omitempty" json:"schema,omitempty" xml:"schema,omitempty"`
	// A brief description of the parameter.
	Deprecated bool `form:"deprecated" json:"deprecated" xml:"deprecated"`
	// An example value for the parameter.
	Example any `form:"example,omitempty" json:"example,omitempty" xml:"example,omitempty"`
	// Examples of the parameter.
	Examples map[string]any `form:"examples,omitempty" json:"examples,omitempty" xml:"examples,omitempty"`
}

// NewCreateDeploymentRequestBody builds the HTTP request body from the payload
// of the "createDeployment" endpoint of the "gram" service.
func NewCreateDeploymentRequestBody(p *gram.DeploymentCreateForm) *CreateDeploymentRequestBody {
	body := &CreateDeploymentRequestBody{
		ExternalID:  p.ExternalID,
		ExternalURL: p.ExternalURL,
	}
	if p.Openapi3p1Tools != nil {
		body.Openapi3p1Tools = make([]*OpenAPI3P1ToolFormRequestBody, len(p.Openapi3p1Tools))
		for i, val := range p.Openapi3p1Tools {
			body.Openapi3p1Tools[i] = marshalGramOpenAPI3P1ToolFormToOpenAPI3P1ToolFormRequestBody(val)
		}
	}
	return body
}

// NewCreateDeploymentDeploymentCreateResultOK builds a "gram" service
// "createDeployment" endpoint result from a HTTP "OK" response.
func NewCreateDeploymentDeploymentCreateResultOK(body *CreateDeploymentResponseBody) *gram.DeploymentCreateResult {
	v := &gram.DeploymentCreateResult{
		ID: body.ID,
	}

	return v
}

// ValidateOpenAPI3P1ToolFormRequestBody runs the validations defined on
// OpenAPI3P1ToolFormRequestBody
func ValidateOpenAPI3P1ToolFormRequestBody(body *OpenAPI3P1ToolFormRequestBody) (err error) {
	if body.PathParameters == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("path_parameters", "body"))
	}
	if body.HeaderParameters == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("header_parameters", "body"))
	}
	if body.QueryParameters == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("query_parameters", "body"))
	}
	if !(body.Kind == "oas3p1_operation") {
		err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.kind", body.Kind, []any{"oas3p1_operation"}))
	}
	err = goa.MergeErrors(err, goa.ValidatePattern("body.name", body.Name, "^[a-zA-Z](?:[a-zA-Z0-9_-]*[a-zA-Z0-9])?$"))
	if utf8.RuneCountInString(body.Name) < 1 {
		err = goa.MergeErrors(err, goa.InvalidLengthError("body.name", body.Name, utf8.RuneCountInString(body.Name), 1, true))
	}
	if utf8.RuneCountInString(body.Name) > 50 {
		err = goa.MergeErrors(err, goa.InvalidLengthError("body.name", body.Name, utf8.RuneCountInString(body.Name), 50, false))
	}
	if len(body.Tags) > 10 {
		err = goa.MergeErrors(err, goa.InvalidLengthError("body.tags", body.Tags, len(body.Tags), 10, false))
	}
	for _, e := range body.Tags {
		err = goa.MergeErrors(err, goa.ValidatePattern("body.tags[*]", e, "^[a-z](?:[a-z0-9_-]*[a-z0-9])?$"))
	}
	if !(body.Method == "GET" || body.Method == "POST" || body.Method == "PUT" || body.Method == "DELETE" || body.Method == "HEAD" || body.Method == "QUERY" || body.Method == "SEARCH") {
		err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.method", body.Method, []any{"GET", "POST", "PUT", "DELETE", "HEAD", "QUERY", "SEARCH"}))
	}
	for _, v := range body.PathParameters {
		if v != nil {
			if err2 := ValidateOpenAPI3P1ParameterSchemaRequestBody(v); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	for _, v := range body.HeaderParameters {
		if v != nil {
			if err2 := ValidateOpenAPI3P1ParameterSchemaRequestBody(v); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	for _, v := range body.QueryParameters {
		if v != nil {
			if err2 := ValidateOpenAPI3P1ParameterSchemaRequestBody(v); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	err = goa.MergeErrors(err, goa.ValidateFormat("body.body", body.Body, goa.FormatJSON))
	return
}

// ValidateOpenAPI3P1ParameterSchemaRequestBody runs the validations defined on
// OpenAPI3P1ParameterSchemaRequestBody
func ValidateOpenAPI3P1ParameterSchemaRequestBody(body *OpenAPI3P1ParameterSchemaRequestBody) (err error) {
	if !(body.In == "query" || body.In == "header" || body.In == "path" || body.In == "cookie") {
		err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.in", body.In, []any{"query", "header", "path", "cookie"}))
	}
	if body.Style != nil {
		if !(*body.Style == "form" || *body.Style == "simple" || *body.Style == "spaceDelimited" || *body.Style == "pipeDelimited" || *body.Style == "deepObject") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.style", *body.Style, []any{"form", "simple", "spaceDelimited", "pipeDelimited", "deepObject"}))
		}
	}
	if body.Schema != nil {
		err = goa.MergeErrors(err, goa.ValidateFormat("body.schema", *body.Schema, goa.FormatJSON))
	}
	return
}
