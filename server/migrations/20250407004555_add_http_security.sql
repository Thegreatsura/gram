-- Create "http_security" table
CREATE TABLE "http_security" ("id" uuid NOT NULL DEFAULT generate_uuidv7(), "key" text NOT NULL, "deployment_id" uuid NOT NULL, "type" text NOT NULL, "name" text NOT NULL, "in_placement" text NOT NULL, "scheme" text NULL, "bearer_format" text NULL, "env_variables" text[] NULL DEFAULT ARRAY[]::text[], "created_at" timestamptz NOT NULL DEFAULT clock_timestamp(), "updated_at" timestamptz NOT NULL DEFAULT clock_timestamp(), "deleted_at" timestamptz NULL, "deleted" boolean NOT NULL GENERATED ALWAYS AS (deleted_at IS NOT NULL) STORED, PRIMARY KEY ("id"), CONSTRAINT "http_security_key_unique" UNIQUE ("deployment_id", "key"), CONSTRAINT "http_security_deployment_id_fkey" FOREIGN KEY ("deployment_id") REFERENCES "deployments" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
